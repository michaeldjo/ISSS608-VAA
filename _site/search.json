[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About this site",
    "section": "",
    "text": "This website consists of a collection of works done for the visual analytics course I took during my MITB journey. I hope you enjoy reading them!"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html",
    "href": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html",
    "title": "Hands-on Exercise 1",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if tidyverse packages are installed in the computer. If they are, then they will be launched into R.\n\npacman::p_load(tidyverse)\n\n\n\n\n\nexam_data <- read_csv(\"data/Exam_data.csv\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html#try-it-yourself-exercise",
    "href": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html#try-it-yourself-exercise",
    "title": "Hands-on Exercise 1",
    "section": "2. Try-It-Yourself Exercise",
    "text": "2. Try-It-Yourself Exercise\n\nWorking with facet\nExample 1 Plotting trellis boxplot using facet_wrap by GENDER\n\nggplot(data = exam_data,\n       aes(x = CLASS,\n           y = MATHS)) +\n  geom_boxplot() +\n  facet_wrap(~ GENDER)\n\n\n\n\nExample 2 Plotting trellis boxplot using facet_grid by GENDER\n\nggplot(data = exam_data,\n       aes(x = CLASS,\n           y = MATHS)) +\n  geom_boxplot() +\n  facet_grid(GENDER ~ .)\n\n\n\n\nExample 3 Plotting 2-D trellis boxplot using facet_grid\n\nggplot(data = exam_data,\n       aes(x = GENDER,\n           y = MATHS)) +\n  geom_boxplot() +\n  facet_grid(GENDER ~ CLASS)\n\n\n\n\n\n\nWorking with theme\nExample 4 Changing theme of bar plot\n\nggplot(data=exam_data, \n       aes(x=RACE)) +\n  geom_bar() +\n  coord_flip() +\n  theme(panel.background = element_rect(fill = \"light blue\"),\n        panel.grid = element_line(color = \"white\"))\n\n\n\n\n\n\nDesigning Data-driven Graphics for Analysis\nExercise 1\n\nggplot(data=exam_data, \n       aes(x = fct_infreq(RACE))) +\n  geom_bar() +\n  geom_text(stat = \"count\", \n            aes(label = paste0(after_stat(count), \", \",\n                        round(after_stat(count)/sum(after_stat(count))*100,\n                        1), \"%\")), \n            vjust = -1) +\n  labs(\n    x = \"Race\",\n    y = \"No. of\\nPupils\") +\n  theme(axis.title.y = element_text(angle = 0))\n\n\n\n\nExercise 2\n\nggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 color = \"black\",\n                 fill = \"light blue\") +\n  geom_vline(aes(xintercept = mean(MATHS)),\n             linetype = \"dashed\",\n             color = \"red\") +\n  geom_vline(aes(xintercept = median(MATHS)),\n             linetype = \"dashed\",\n             color = \"black\")\n\n\n\n\nExercise 3\n\nggplot(data = exam_data,\n       aes(x = ENGLISH)) +\n  geom_histogram(data = exam_data |> select(ENGLISH), \n                 bins = 30,\n                 alpha = 0.3) +\n  geom_histogram(aes(fill = GENDER),\n                 bins = 30,\n                 color = \"black\",\n                 show.legend = FALSE) +\n  facet_grid(~ GENDER) +\n  theme_bw()\n\n\n\n\nExercise 4\n\nggplot(data = exam_data,\n       aes(y = ENGLISH,\n           x = MATHS)) +\n  geom_point() +\n  coord_cartesian(xlim = c(0,100),\n                  ylim = c(0,100)) +\n  geom_vline(aes(xintercept = 50),\n             linetype = \"dashed\",\n             color = \"grey40\") +\n  geom_hline(aes(yintercept = 50),\n             linetype = \"dashed\",\n             color = \"grey40\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html",
    "title": "Hands-on Exercise 2: Creating Elegant Graphics with ggplot2",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if packages are installed in the computer. If they are, then they will be launched into R.\n\npacman::p_load(tidyverse, ggdist, ggridges, \n               patchwork, ggthemes, hrbrthemes, \n               ggrepel, ggforce)\n\n\n\n\n\nexam_data <- read_csv(\"data/Exam_data.csv\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#exercises",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#exercises",
    "title": "Hands-on Exercise 2: Creating Elegant Graphics with ggplot2",
    "section": "2. Exercises",
    "text": "2. Exercises\n\n2.1 Working with ggrepel\nggrepel helps to repel overlapping text\n\nggplot(data = exam_data,\n       aes(x = MATHS,\n           y = ENGLISH)) +\n  geom_point() +\n  geom_smooth(method = lm,\n              linewidth = 0.5) +\n  geom_label_repel(aes(label = ID),\n                   fontface = \"bold\") +\n  coord_cartesian(xlim = c(0,100),\n                  ylim = c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: ggrepel: 317 unlabeled data points (too many overlaps). Consider\nincreasing max.overlaps\n\n\n\n\n\n\n\n2.2 Working with themes\n8 Built-in themes: theme_gray(), theme_bw(), theme_classic(), theme_dark(), theme_light(), theme_linedraw(), theme_minimal(), and theme_void(). Refer to here Example below\n\nggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  theme_gray() +\n  ggtitle(\"Ditribution of Maths scores\")\n\n\n\n\nUnique ggtheme packages. Refer to here for more details on ggthemes package\n\nggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  theme_economist() +\n  ggtitle(\"Ditribution of Maths scores\")\n\n\n\n\nUnique hrbrthemes packages. This focuses more on the typographic elements, labels and fonts. However, it is mostly used for “production workflow”, where the intent is for the output of your work to be put into a publication of some kind, whether it be a blog post, academic paper, presentation, internal report or industry publication.\nRefer to here for more details on hrbrthemes package\n\nggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  theme_ipsum(axis_title_size = 18,          #increase font size of the axis title to 18\n              base_size = 15,                #increase the default axis label to 15\n              grid = \"Y\") +                  #only keep the y-axis grid line -> remove the x-axis grid lines\n  ggtitle(\"Ditribution of Maths scores\")\n\n\n\n\n\n\n2.3 Working with patchwork\nCreating composite plot by combining multiple graphs.\nStart with creating three statistical graphics below\n\n#creating histogram\np1 <- ggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  coord_cartesian(xlim = c(0,100)) +\n  ggtitle(\"Ditribution of Maths scores\")\n\np2 <- ggplot(data = exam_data,\n       aes(x = ENGLISH)) +\n  geom_histogram(bins = 20,\n                 boundary = 100,\n                 color = \"grey25\",\n                 fill = \"grey90\") +\n  coord_cartesian(xlim = c(0,100)) +\n  ggtitle(\"Ditribution of English scores\")\n\n#creating scatterplot\np3 <- ggplot(data = exam_data,\n       aes(x = MATHS,\n           y = ENGLISH)) +\n  geom_point() +\n  geom_smooth(method = lm,\n              linewidth = 0.5) +\n  coord_cartesian(xlim = c(0,100),\n                  ylim = c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n\nCreating patchwork.\n\nUse ‘+’ sign to create two columns layout\nUse ‘/’ sign to create two row layout (stack)\nUse ‘()’ sign to create subplot group\nUse ‘|’ sign to place the plots besisde each other\n\nRefer to here for more details. Examples below\n\np1 + p2 / p3\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n(p1 / p2) | p3\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n((p1 / p2) | p3) +\n  plot_annotation(tag_levels = 'I')\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n#this will auto-tag the subplots in text\n\nCombining patchwork and themes\n\n((p1 / p2) | p3) & theme_economist()\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n#this will auto-tag the subplots in text\n\nInsert another plot in a plot\n\np3 + inset_element(p2,\n                   left = 0.02,\n                   bottom = 0.7,\n                   right = 0.5,\n                   top = 1)\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html",
    "title": "Hands-on Exercise 3: Programming Interactive Data Visualisation with R",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if packages are installed in the computer. If they are, then they will be launched into R. The R packages installed are:\n\nggiraph for making ‘ggplot’ graphics interactive.\nplotly, R library for plotting interactive statistical graphs.\ngganimate, an ggplot extension for creating animated statistical graphs.\nDT provides an R interface to the JavaScript library DataTables that create interactive table on html page.\ntidyverse, a family of modern R packages specially designed to support data science, analysis and communication task including creating static statistical graphs.\npatchwork for compising multiple plots.\ngifski converts video frames to GIF animations using pngquant’s fancy features for efficient cross-frame palettes and temporal dithering. It produces animated GIFs that use thousands of colors per frame.\ngapminder: An excerpt of the data available at Gapminder.org. We just want to use its country_colors scheme.\n\n\npacman::p_load(ggiraph, plotly, gganimate, DT, tidyverse, patchwork, gifski, gapminder, readxl, rPackedBar)\n\n\n\n\n\nexam_data <- read_csv(\"data/Exam_data.csv\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#exercises",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#exercises",
    "title": "Hands-on Exercise 3: Programming Interactive Data Visualisation with R",
    "section": "2. Exercises",
    "text": "2. Exercises\n\n2.1 Using ggiraph for interactive data visualization\nggiraph is an htmlwidget and a ggplot2 extension. It allows ggplot graphics to be interactive. The interactivity is made with ggplot geometries that can understand three arguments:\n\nTooltip: a column of data-sets that contain tooltips to be displayed when the mouse is over elements.\nData_id: a column of data-sets that contain an id to be associated with elements.\nOnclick: a column of data-sets that contain a JavaScript function to be executed when elements are clicked.\n\nIf it is used within a shiny application, elements associated with an id (data_id) can be selected and manipulated on client and server sides.\n\n2.1.1 Using tooltip (tooltip effect)\nThere are two parts of the codes: 1. creating ggplot object, 2. girafe() of ggiraph will be used to create an interactive svg object.\n\nmy_plot <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n  \n  #geom_dotplot_interactive still takes argument of original geom_dotplot but with tooltip enabled in aes()\n  geom_dotplot_interactive(\n    aes(tooltip = ID),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot,\n  width_svg = 6,\n  height_svg = 6*0.618\n)\n\n\n\n\n\nInteractivity: By hovering the mouse pointer on an data point of interest, the student’s ID will be displayed.\n\n\n2.1.2 Displaying multiple information on tooltip\nWhat if we want to display Student ID and Class while hovering with tooltip?\n\n#Creating new field called tooltip\nexam_data$tooltip <- c(paste0(\n  \"Name = \", exam_data$ID,\n  \"\\n Class\", exam_data$CLASS\n))\n\nmy_plot2 <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n  \n  geom_dotplot_interactive(\n    aes(tooltip = exam_data$tooltip),         #refer to the tooltip field above\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot2,\n  width_svg = 8,\n  height_svg = 8*0.618\n)\n\n\n\n\n\nInteractivity: By hovering the mouse pointer on an data point of interest, the student’s ID and Class will be displayed.\n\n\n2.1.3 Customising tooltip style\nUsing opts_tooltip to customise tooltip rendering by adding css declaration\n\ntooltip_css <- \"background-color:white; font-style:bold; color:red;\"\n\nmy_plot3 <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n  \n  geom_dotplot_interactive(\n    aes(tooltip = ID),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot3,\n  width_svg = 6,\n  height_svg = 6*0.618,\n  options = list(\n    opts_tooltip(\n      css = tooltip_css)\n  )\n)\n\n\n\n\n\nNote: Background color is now white and the font color is red and bold\n\n\n2.1.4 Displaying statistics on tooltip\nIn this example, a function is used to compute 90% confident interval of the mean. The derived statistics are then displayed in the tooltip. This is created by creating a function\n\ntooltip_fn <- function(y, ymax, accuracy = .01) {   \n  mean <- scales::number(y, accuracy = accuracy) \n  sem <- scales::number(ymax - y, accuracy = accuracy) \n  #paste(\"Mean maths scores:\", mean, \"+/-\", sem)                      #this line of code does not mean anything here\n} \n\ngg_point <- ggplot(data = exam_data,\n            aes(x = RACE)) +\n  \n  stat_summary(\n    aes(y = MATHS, \n        tooltip = after_stat(\n          tooltip_fn(y, ymax))),\n    fun.data = \"mean_se\",\n    geom = GeomInteractiveCol,\n    fill = \"lightblue\"\n    ) +\n  \n  stat_summary(\n    aes(y = MATHS),\n    fun.data = \"mean_se\",\n    geom = \"errorbar\", width = 0.2, size = 0.2\n  )\n\ngirafe(\n  ggobj = gg_point,\n  width_svg = 8,\n  height_svg = 8*0.618,\n  )\n\n\n\n\n\n\n\n2.1.5 Using data_id (hover effect)\n\nmy_plot <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n\n  geom_dotplot_interactive(\n    aes(data_id = CLASS),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot,\n  width_svg = 6,\n  height_svg = 6*0.618\n)\n\n\n\n\n\nInteractivity: Elements associated with a data_id (i.e CLASS) will be highlighted upon mouse over. Note that the default value of the hover css is hover_css = “fill:orange;”.\n\n\n2.1.6 Customising hover effect style\nUsing css declaration to change the highlighting effect\n\nmy_plot2 <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n\n  geom_dotplot_interactive(\n    aes(data_id = CLASS),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot2,\n  width_svg = 6,\n  height_svg = 6*0.618,\n  options = list(\n    opts_hover(css = \"fill: pink;\"),\n    opts_hover_inv(css = \"opacity:0.2;\")\n  )\n)\n\n\n\n\n\nInteractivity: Elements associated with a data_id (i.e CLASS) will be highlighted upon mouse over. Notice opts_hover refers to the selected data and opts_hover_inv refers to the non-selected data. Different from section 2.1.3 above, the css customisation request are encoded directly.\n\n\n2.1.7 Combining tooltip and hover effect\n\nmy_plot_comb <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n\n  geom_dotplot_interactive(\n    aes(tooltip = CLASS,\n        data_id = CLASS),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot_comb,\n  width_svg = 6,\n  height_svg = 6*0.618,\n  options = list(\n    opts_tooltip(css = \"background-color:white; font-style:bold; color:green;\"),\n    opts_hover(css = \"fill: pink;\"),\n    opts_hover_inv(css = \"opacity:0.2;\")\n  )\n)\n\n\n\n\n\nInteractivity: Elements associated with a data_id (i.e CLASS) will be highlighted upon mouse over. At the same time, the tooltip will show the CLASS.\n\n\n2.1.8 Using onclick (click effect)\nonclick argument of ggiraph provides hotlink interactivity on the web.\n\nexam_data$onclick <- sprintf(\"window.open(\\\"%s%s\\\")\",\n\"https://www.moe.gov.sg/schoolfinder?journey=Primary%20school\",\nas.character(exam_data$ID))\n\nmy_plot <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n\n  geom_dotplot_interactive(\n    aes(onclick = onclick),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = my_plot,\n  width_svg = 6,\n  height_svg = 6*0.618\n)\n\n\n\n\n\nInteractivity: Web document link with a data object will be displayed on the web browser upon mouse click. Note that click actions must be a string column in the dataset containing valid javascript instructions.\n\n\n2.1.9 Coordinated multiple views with ggiraph\nCoordinated multiple views methods is interactive in which when a data point of one of the dotplot is selected, the corresponding data point ID on the second data visualisation will be highlighted too.\nIn order to build a coordinated multiple views, the following programming strategy will be used:\n\nAppropriate interactive functions of ggiraph will be used to create the multiple views.\npatchwork function of patchwork package will be used inside girafe function to create the interactive coordinated multiple views.\n\n\np1 <- ggplot(data = exam_data,\n            aes(x = MATHS)) +\n\n  geom_dotplot_interactive(\n    aes(tooltip = ID,\n        data_id = ID),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  coord_cartesian(xlim = c(0,100)) +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\np2 <- ggplot(data = exam_data,\n            aes(x = ENGLISH)) +\n  \n  geom_dotplot_interactive(\n    aes(tooltip = ID,\n        data_id = ID),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  coord_cartesian(xlim = c(0,100)) +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  code = print(p1 / p2),\n  width_svg = 6,\n  height_svg = 6,\n  options = list(\n    opts_hover(css = \"fill: blue;\"),\n    opts_hover_inv(css = \"opacity:0.2;\")    \n  )\n)\n\n\n\n\n\nThe data_id aesthetic is critical to link observations between plots and the tooltip aesthetic is optional but nice to have when mouse over a point.\n\n\n\n2.2 Using plotly method for interactive data visualization\n\nPlotly’s R graphing library create interactive web graphics from ggplot2 graphs and/or a custom interface to the (MIT-licensed) JavaScript library plotly.js inspired by the grammar of graphics.\nDifferent from other plotly platform, plot.R is free and open source.\n\nThere are two ways to create interactive graph by using plotly, they are:\n\nby using plot_ly(), and\nby using ggplotly()\n\n\n2.2.1 Using plot_ly\nCreating basic interactive scatterplot\n\nplot_ly(data = exam_data,\n        x = ~MATHS,\n        y = ~ENGLISH,\n        color = ~RACE)\n\n\n\n\n\nChanging the default color pallete to ColorBrewel colour palette\n\nplot_ly(data = exam_data, \n        x = ~MATHS, \n        y = ~ENGLISH, \n        color = ~RACE, \n        colors = \"Set1\")\n\n\n\n\n\nCustomising the color scheme manually\n\npal <- c(\"red\", \"purple\", \"blue\", \"green\")\n\nplot_ly(data = exam_data, \n        x = ~MATHS, \n        y = ~ENGLISH, \n        color = ~RACE, \n        colors = pal)\n\n\n\n\n\nCustomising tooltip\n\nplot_ly(data = exam_data, \n        x = ~MATHS, \n        y = ~ENGLISH,\n        text = ~paste(\"Student ID:\", ID,     \n                      \"<br>Class:\", CLASS),  \n        color = ~RACE, \n        colors = \"Set1\")\n\n\n\n\n\nWorking with layout. To learn more about layout, visit this link.\n\nplot_ly(data = exam_data, \n        x = ~MATHS, \n        y = ~ENGLISH,\n        text = ~paste(\"Student ID:\", ID,     \n                      \"<br>Class:\", CLASS),  \n        color = ~RACE, \n        colors = \"Set1\") |> \n  \n  layout(title = 'English Score versus Maths Score',\n         xaxis = list(range = c(0,100)),\n         yaxis = list(range = c(0,100)))\n\n\n\n\n\n\n\n2.2.2 Using ggplotly\nCreating basic interactive scatterplot. With ggplotly, we can use the original ggplot2 and add ggplotly at the end as extra line\n\np <- ggplot(data=exam_data, \n            aes(x = MATHS,\n                y = ENGLISH)) +\n  geom_point(dotsize = 1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\nggplotly(p) \n\n\n\n\n\nCreating Multiple Views using highlight_key and subplot of plotly package\n\nd <- highlight_key(exam_data)\n\np1 <- ggplot(data=d, \n              aes(x = MATHS,\n                  y = ENGLISH)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\np2 <- ggplot(data=d, \n            aes(x = MATHS,\n                y = SCIENCE)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\nsubplot(ggplotly(p1),\n        ggplotly(p2))\n\n\n\n\n\nClick on a data point of one of the scatterplot and see how the corresponding point on the other scatterplot is selected.\n\n\n\n2.3 Using crosstalk method for interactive data visualization\nCrosstalk is an add-on to the htmlwidgets package. It extends htmlwidgets with a set of classes, functions, and conventions for implementing cross-widget interactions (currently, linked brushing and filtering).\n\n2.3.1 Interactive Data Table: DT package\n\nA wrapper of the JavaScript Library DataTables\nData objects in R can be rendered as HTML tables using the JavaScript library ‘DataTables’ (typically via R Markdown or Shiny).\n\n\nDT::datatable(exam_data, class= \"compact\")\n\n\n\n\n\n\n\n\n2.3.2 Linked brushing using crosstalk method\nThings to learn from the code chunk:\n\nhighlight() is a function of plotly package. It sets a variety of options for brushing (i.e., highlighting) multiple plots. These options are primarily designed for linking multiple plotly graphs, and may not behave as expected when linking plotly to another htmlwidget package via crosstalk. In some cases, other htmlwidgets will respect these options, such as persistent selection in leaflet.\nbscols() is a helper function of crosstalk package. It makes it easy to put HTML elements side by side. It can be called directly from the console but is especially designed to work in an R Markdown document. Warning: This will bring in all of Bootstrap!.\n\n\nd <- highlight_key(exam_data)\n\np <- ggplot(data=d, \n              aes(x = MATHS,\n                  y = ENGLISH)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\ngg <- highlight(ggplotly(p),\n                \"plotly_selected\")\n\ncrosstalk::bscols(gg,\n                  DT::datatable(d),\n                  widths = 5)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2.4 Using gganimate method for creating animation\ngganimate extends the grammar of graphics as implemented by ggplot2 to include the description of animation. It does this by providing a range of new grammar classes that can be added to the plot object in order to customise how it should change with time.\n\ntransition_*() defines how the data should be spread out and how it relates to itself across time.\nview_*() defines how the positional scales should change along the animation.\nshadow_*() defines how data from other points in time should be presented in the given point in time.\nenter_*()/exit_*() defines how new data should appear and how old data should disappear during the course of the animation.\nease_aes() defines how different aesthetics should be eased during transitions.\n\nImport data from the Data worksheet from GlobalPopulation Excel workbook.\n\ncol <- c(\"Country\", \"Continent\")\nglobalPop <- read_xls(\"data/GlobalPopulation.xls\",\n                      sheet=\"Data\") %>%\n  mutate_each_(funs(factor(.)), col) %>%\n  mutate(Year = as.integer(Year))\n\nBasic ggplot function to create static bubble plot\n\nggplot(globalPop, aes(x = Old, y = Young, \n                      size = Population, \n                      colour = Country)) +\n  \n  geom_point(alpha = 0.7, \n             show.legend = FALSE) +\n  scale_colour_manual(values = country_colors) +\n  \n  scale_size(range = c(2, 12)) +\n  \n  labs(title = 'Year: {frame_time}', \n       x = '% Aged', \n       y = '% Young') \n\n\n\n\nBuilding animated bubble plot\n\nggplot(globalPop, aes(x = Old, y = Young, \n                      size = Population, \n                      colour = Country)) +\n  \n  geom_point(alpha = 0.7, \n             show.legend = FALSE) +\n  \n  scale_colour_manual(values = country_colors) +\n  \n  scale_size(range = c(2, 12)) +\n  \n  labs(title = 'Year: {frame_time}', \n       x = '% Aged', \n       y = '% Young') +\n  transition_time(Year) +       \n  ease_aes('linear')            \n\n\n\n\n\n\n2.5 Using packed_bar method for visualizing large data interatively\nPacked bar aims to support the need of visualising skewed data over hundreds of categories.\nImporting data\n\nGDP <- read_csv(\"data/GDP.csv\")\nWorldCountry <- read_csv(\"data/WorldCountry.csv\")\n\nData preparation\n\nGDP_selected <- GDP %>%\n  mutate(Values = as.numeric(`2020`)) %>%\n  select(1:3, Values) %>%\n  pivot_wider(names_from = `Series Name`,\n              values_from = `Values`) %>%\n  left_join(y=WorldCountry, by = c(\"Country Code\" = \"ISO-alpha3 Code\"))\n\nData preparation for packed bar\n\nGDP_selected_pb <- GDP %>%\n  mutate(GDP = as.numeric(`2020`)) %>%\n  filter(`Series Name` == \"GDP (current US$)\") %>%\n  select(1:2, GDP) %>%\n  na.omit()\n\nIn the code chunk below, plotly_packed_bar() of rPackedBar package is used to create an interactive packed bar. Refer to this Vignettes and the user guide to learn more about the package.\n\np = plotly_packed_bar(\n  input_data = GDP_selected_pb,\n  label_column = \"Country Name\",\n  value_column = \"GDP\",\n  number_rows = 10,\n  plot_title = \"Top 10 countries by GDP, 2020\",\n  xaxis_label = \"GDP (US$)\",\n  hover_label = \"GDP\",\n  min_label_width = 0.018,\n  color_bar_color = \"#00aced\",\n  label_color = \"white\")\nplotly::config(p, displayModeBar = FALSE)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03.html",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03.html",
    "title": "In-class Exercise 3",
    "section": "",
    "text": "Install and loading R packages\nTwo packages will be installed and loaded. They are: tidyverse and ggiraph.\n\npacman::p_load(ggiraph, tidyverse)\n\n\n\nImporting data\n\nexam_data <- read_csv('data/Exam_data.csv')\n\n\n\nPlotting the graph\nUsing ggplot2 (non-interactive)\n\nggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_dotplot(dotsize = 0.5)\n\n\n\n\nUsing ggirafe (interactive)\n\np <- ggplot(data = exam_data,\n       aes(x = MATHS)) +\n  geom_dotplot_interactive(\n    aes(tooltip = ID),\n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,\n                     breaks = NULL)\n\ngirafe(\n  ggobj = p,\n  width_svg = 6,\n  height_svg = 6*0.618\n)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ISSS608 Visual Analytics & Application",
    "section": "",
    "text": "Welcome to ISSS608 Visual Analytics and Application.\nThis website hosted my coursework prepared for this course."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "title": "Take-home Exercise 1",
    "section": "",
    "text": "The original dataset was downloaded from Department of Statistics, Singapore, titled Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022.\nThe file downloaded was respopagesextod2022.csv."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#step-by-step-description",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#step-by-step-description",
    "title": "Take-home Exercise 1",
    "section": "2. Step-by-Step Description",
    "text": "2. Step-by-Step Description\nThis section details the step-by-step procedure to create age-sex pyramid on Singapore population (2022) using Trellis display in Tableau.\n\n2.1 Loading and cleaning data\n\n\n\n\n\n\n\n\n\nStep\nScreenshot\n\n\n\n\n1\nLoad respopagesextod2022.csv file in Tableau Desktop\n\n\n\n2\nClick on the drop-down button on field “AG”, choose Create Calculation Field\n\n\n\n3\nName the new field “Age Group” and key in the formula as per screenshot. This will create new field to replace the “_” with space\n\n\n\n4\nRename field “PA” to “Planning Area”\n\n\n\n\n\n\n2.2 Creating calculated fields to make trellis chart\n\n\n\n\n\n\n\n\n\nStep\nScreenshot\n\n\n\n\n1\nCreate new worksheet and name it “Singapore Population Pyramid Trellis Chart (2022)”\n\n\n\n2\nClick on the drop-down button beside the Search are on the side bar, choose Create Calculation Field.\n\n\n\n3\nName the new field “Columns” and key in the formula as per screenshot. This is required to create the Trellis Chart arrangements\n\n\n\n4\nRight Click on newly created field “Columns” and click “Convert to Discrete”\n\n\n\n5\nRight Click on “Columns” field and choose Duplicate this time. Rename the duplicated field “Rows” and key in the formula as per screenshot. Convert the “Rows” field to discrete as well\n\n\n\n6\nRight Click on the “Sex” field, choose Create -> Calculation Field\n\n\n\n7\nName the new field it “Male Population” and key in the formula as per screenshot\n\n\n\n8\nRight Click on newly created field “Male Population” and choose Duplicate. Rename the duplicated field “Female Population” and key in the formula as per screenshot\n\n\n\n\n\n\n2.3 Creating trellis chart\n\n\n\n\n\n\n\n\n\nStep\nScreenshot\n\n\n\n\n1\nDrag “Columns”, “Male Population”, and “Female Population” to Columns.\nDrag “Rows” and “Age Group” to Rows\n\n\n\n2\nDrag “Planning Area” to Detail\n\n\n\n3\nRight click on “Male Population” axis and choose Edit Axis\n\n\n\n4\nClick on Reversed. This will reverse the “Male Population” axis to be in the middle (same as Female Population axis)\n\n\n\n5\nRight click on “Male Population” axis and choose Sort descending. This will ensure the top Age Group is “90 and over” as per Age-Sex pyramid\n\n\n\n6\nRight-click on “Columns” and choose Edit Table Calculation\n\n\n\n7\nIn the Table Calculation pop-up, choose Specific Dimension and check both “Planning Area” and “Age Group”. Drag “Planning Area” above “Age Group”\nChoose “Planning Area” on At the level option.\nRepeat step 6 and 7 for “Rows”\n\n\n\n8\nDrag “Planning Area” to filter and click OK\n\n\n\n9\nRight-click on “Planning Area” on Filter tab and choose Show Filter.\nThis will add the filter feature in the Worksheet\n\n\n\n10\nNavigate to Sum(Female Population) (red box) and click on the icon beside “Planning Area” and choose Label\nThis will add “Planning Area” as label on the right-side of the age-sex pyramid\n\n\n\n11\nChoose 9 Planning Areas randomly from the filter and choose Entire View from the Toolbar\nThis will show 9 chosen PAs and fit the entire view\n\n\n\n12\nRight-click on the “Columns” axis and uncheck Show Header to hide the “Columns” header\n\n\n\n13\nRight-click on the “Rows” axis and uncheck Show Header to hide the “Rows” header\n\n\n\n14\nDrag “Male Population” to SUM(Male Population) Color\nDrag “Female Population” to SUM(Female Population) Color\nThis will group the Sex by color in the dashboard\n\n\n\n15\nRight-click on the “Age Group” axis and choose Format\n\n\n\n16\nChoose Right alignment and reduce Font to 7. This will improve the readability of the Age Group axis labels\n\n\n\n17\nChoose the same axis range for both Male and Female Population to ensure balanced view\nIn this case, artificially fix this at 0 to 20,000\n\n\n\n\n\n\n2.4 Creating dynamic labels\n\n\n\n\n\n\n\n\n\nStep\nScreenshot\n\n\n\n\n1\nCreate new calculation field called “Max Population” and key in the formula as per screenshot\nThis calculates the max population of female for each pane, which will be used to determine label position\n\n\n\n2\nCreate new calculation field called “Label Position” and key in the formula as per screenshot\nThis ensures the label position is at the first index (top)\n\n\n\n3\nDrag “Label Position” to Columns, to the right of “SUM(Female Population)” and change the style as Line to display the point (red-circled) indicating the future label position\n\n\n\n4\nDrag “Planning Area” to Label of “Label Position” tab to display the “Planning Area” as label (red-boxes)\nClick on Size to reduce the point size to minimum. Click on Color to make it transparent (green-boxes). This will remove the point from display\n\n\n\n5\nThere will be sign showing “>162 nulls” values related to “Label Position”. This is because of the If-Then statement, which returns null to other indexes other than 1. Hide this warning as this is not relevant.\n\n\n\n6\nRight Click on “Label Position”, uncheck Show Header and choose Dual Axis\n\n\n\n7\nDrag “Male Population” to to Label of “SUM(Male Population)” tab to display the population values as label on the charts\nDo the same for “Female Population”\n\n\n\n8\nClick on the Label of “SUM(Male Population)” tab and format it to “Min/Max” and “Pane” to only highlight the min and max values per pane\nDo the same for “Female Population”\n\n\n\n9\nTo display values for special highlighted bar, right-click on individual bar, select Mark Label and tick Always Show\nThis will highlight relevant individual bars (refer to Section 3)\n\n\n\n\n\n\n2.5 Final touch-up to improve aesthetics and clarity\n\n\n\n\n\n\n\n\n\nStep\nScreenshot\n\n\n\n\n1\nDouble-click on the title to add the title\nSubtitle can be easily added by adding a new line with different font size\nThis will help users to understand the content and details of the dashboard\n\n\n\n2\nClick on Worksheet and click on Show Caption to show and edit the caption\n\n\n\n3\nDouble-click on the caption box (red-box) and edit the caption\nIn this case, we will add the source of the data. Format the text as shown on the right\n\n\n\n4\nWe will remove the x-axis title as there is already label to indicate Male and Female Population\nTo do this, double-click on the axis title and delete the Axis Title (red-box)\n\n\n\n\n\n\n2.6 Final Dashboard\nThe final dashboard is shown in Figure 1 below.\nThe default display shows age-sex (population) pyramid (June 2022) grouped by Singapore planning area in 3x3 trellis display. The user(s) will be able to select any planning areas of interest using the filter feature on the right without any restriction in number of choice. This gives them freedom to choose any planning areas of interest for study or comparison purposes.\nNote that the title and subtitle of the dashboard to highlight the purpose and the details of the visualization. The rationale in selecting the nine default planning areas will be explained in Section 3 below.\n\n\n\nFigure 1. Final dashboard display"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#discussion",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#discussion",
    "title": "Take-home Exercise 1",
    "section": "3. Discussion",
    "text": "3. Discussion\nThis section discusses the reasoning behind decisions made in creating the visualization and patterns revealed by the analysis.\n\n3.1 Unequal population distribution by planning area\nBy choosing all the filters (Figure 2), we can roughly group the planning areas (PAs) to three different categories:\n\nNon-residential PAs\nLower populated PAs\nHigher populated PAs\n\n\n\n\nFigure 2. Displaying all PAs reveals unequal population distribution across planning areas\n\n\nThe first category would fall under non-residential zones, which are mainly used for either commercial (Downtown), industrial (Changi), or natural zone (Central Water Catchment). Note this does not necessarily mean zero population, areas like Downtown have small residential populations, most likely represented by high-end luxury apartments.\nThe second category (i.e., Jurong East, Kallang, Novena) could be explained by mixed-area land-uses or simply due to smaller PA size, while the last category (i.e., Sengkang, Tampines, Yishun) is full-fledged residential area. Figure 3 below shows the three distinct PA categories.\n\n\n\nFigure 3. Three distinct PA categories revealed by the dashboard\n\n\nAs such, it makes sense to show the absolute population instead of percentage of PA population in the x-axis to showcase this unequal distribution. On top of that, we will exclude non-residential PAs from the analysis as they hold little significance.\n\n\n3.2 Different shapes of age-sex pyramids across PA\nFrom Figure 2 above, we can analyze not only the total population, but also the varying shapes of the pyramids across PAs. These pyramids have common features like thinning population at their pinnacles (eldest age-group) and thicker middle age-groups. However, there are notable differences as well.\nReferring to Figure 4 below, Bedok, Jurong West, and Ang Mo Kio pyramids are more rounded-shaped. Their highest age-group proportions lie around 50-70 years, with thinner population in other age-groups, indicating aging population.\nOn the other hand, Chua Chu Kang, Pasir Ris and Tampines still have high 50-70 years age-group population, but there is clear emerging young populations (20-35 years), making the pyramids look more like arrow-shaped. These trends are more prominent on the younger towns. Punggol is an extreme case with highly accentuated 35-45 and 5-10 years age groups.\nSome unique cases like Sembawang and Toa Payoh offer unexpectedly high 30-35 age-group, which almost looks like outliers, making the pyramids look jagged.\n\n\n\nFigure 4. Analyzing different shapes of age-sex pyramids\n\n\n\n\n3.3 Gender Ratio on each PA is relatively constant\nChoosing the 9 most populated PAs reveal relatively constant gender ratio on each PA, despite different shapes of the pyramids. This is accentuated in Figure 5 below.\n\n\n\nFigure 5. Nine most populated PA age-sex pyramids\n\n\nTo illustrate this, we can examine Jurong West and Punggol age-sex pyramids closely. Jurong West pyramids look rounded. Meanwhile, Punggol has a completely different arrow-shaped pyramid. Despite these differences, the proportion of male vs female population remains rather constant for different age groups (mirror-image across central axis). This observation is quite consistent across different PAs chosen.\nIt is noted, however, that at the higher age group, there tend to be more females than males. This is shown most clearly in Bedok (90 and over) with 1440 females vs 660 males. Combining this information with relatively uniform gender-ratio at the lower age group, this could be explained by higher life expectancy of females.\nRegardless, this trend was also observed in Figure 4 as well. Hence it was decided to select Figure 4 as the default PA filter as it highlights variations in pyramid shapes and total population."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "title": "Take-home Exercise 2",
    "section": "",
    "text": "This exercise aims to provide critique and improvements to age-sex (population) pyramid created by peer in Take-home Exercise 1 using Tableau. This will be done based on clarity and aesthetics. The original design will then be remade using data visualization design principles and best practices using ggplot2, its extensions, and tidyverse packages.\nThe original dataset was downloaded from Department of Statistics, Singapore, titled Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022.\nThe file downloaded was respopagesextod2022.csv."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-visualization-critique",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-visualization-critique",
    "title": "Take-home Exercise 2",
    "section": "2. Data Visualization Critique",
    "text": "2. Data Visualization Critique\n\n2.1 Original Design\nFigure 1 below shows the original design of the Singapore population pyramid by Planning Area in June 2022.\n\n\n\nFigure 1. Original design of age-sex pyramid prepared by peer in Take Home Exercise 1 using Tableau\n\n\nThe link to the actual dashboard can be accessed here.\n\n\n\n\n\n2.2 Critique : Clarity and Aesthetics\n\nClarity\n\nWhile Tableau displays dynamic chart, the lack of x-axis in the plot makes it difficult to gauge the male and female population. This also potentially misleads audience as it wrongly presents different planning areas having comparable population size (i.e., population size of Downtown Core is much smaller than Tampines, but the length of the bars show that they are similar). This is because the scales of x-axis for different pyramids (in different planning areas) are inconsistent.\nLack of legend, making it difficult to determine which side represents Male or Female population. Note that traditionally, the Male population is on the left side of the pyramids, hence initially creating confusion between color and position without legend.\nThe title is descriptive, but not specific. For instance, it does not tell the audience which period was this from. Additionally, it does not tell the audience the context of the visualization (i.e., main highlight, story, etc). A well-worded title and subtitle should help here.\nThe original data age group binning (5 years) was kept. This is good as it keeps the resolution, grouping this to lower resolution (i.e., 10 years) might lead to detail loss. However, this leads to audience having to scroll down on each individual pyramid, making it difficult to observe patterns from quick glance.\nLack of references for audience to compare across different facets, having relevant data labels or reference line would improve readability.\nThe presence of grid lines without x-axis is meaningless as there is no reference point.\nThe order of the planning areas in the trellis chart is not meaningful.\nLack of caption to present the source of data.\n\n\n\nAesthetics\n\nGood color choices representing Male and Female population, making it easy to read.\nClear planning area labels for each population pyramid.\nUniform white background gives a clean look.\nSoft grid lines are not distracting.\nY-axis labels are not very easy to read due to presence of ‘_’."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#makeover-design",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#makeover-design",
    "title": "Take-home Exercise 2",
    "section": "3. Makeover Design",
    "text": "3. Makeover Design\n\n3.1 Proposed Sketch\nFrom the original visualization, it seems that the original author intends to contrast different population sizes and patterns across Singapore planning areas. This might be the reason for presenting low populated area like “Downtown Core” and highly populated area like “Tampines” together. One way to do this is to plot the absolute pyramids (based on actual population) of the original planning areas, ordered based on population sizes. Rough sketch of proposed design is shown below.\n\n\n\nFigure 2. Proposed sketch of the first plot\n\n\nAnother angle of visualizing age-sex pyramids is by plotting the proportion pyramids (based on proportion% of population). This will highlight the population patterns better without being influenced by the population size. With this, we could also add reference chart based on Singapore overall population proportion %. It is also important to have data labels highlighting the population of each planning area to still highlight the differences in population sizes.\n\n\n\nFigure 3. Proposed sketch of the second plot\n\n\n\n\n\n\n\n3.2 Data Preparation\nLaunch R packages and import data from csv using readr::read_csv().\nThe packages installed are tidyverse, cowplot and scales. While tidyverse contains all useful R packages used for cleaning data and plotting graph, cowplot is ggplot2 extension, providing professional-looking figure. scales helps to add comma and/or percentage for labels display. patchwork is used to combine the two visualizations. All packages can be found within CRAN.\n\n\nShow the code\n#Load packages\npacman::p_load(cowplot, scales, patchwork, tidyverse)\n\n#Import data\nsgpop <- read_csv(\"data/respopagesextod2022.csv\", show_col_types = FALSE)\n\n\n\nModifying the loaded data\n\nGroup the original data by planning area (PA), age group (AG), and gender (Sex) using dplyr::group_by() and dplyr::summarise(), deriving new variable called sum_pop, which is the sum of population grouped by the three variables mentioned. dplyr::ungroup() is used to avoid further complications.\nConvert Males population to negative to reverse the bar chart axis using dplyr::mutate() and ifelse.\nEliminate the ‘_’, ‘to’, ‘and over’ in age group (AG) using dplyr::mutate() and gsub().\nDerive variables min_pop and max_pop to determine the min and max male & female population values for each planning area (PA) across age group (AG). This will be used in conjunction with signal below for data labeling purpose.\nDerive new variables to calculate population proportion : sum of population by PA (sum_pop_pa), sum of population by age and sex (sum_pop_total), sum of total Singapore population (sum_pop_total_sg)\nUsing left_join() to create new clean tibble called sgpop_clean which will be used as final dataset for plotting\n\n\n\nShow the code\n#Data Cleaning\n#sgpop_group groups total population by PA, AG, and Sex to create base data for population pyramid\nsgpop_group <- sgpop |> \n  mutate(AG = gsub('_to_',' - ', AG),\n         AG = gsub('_and_over', '+', AG),\n         Pop = ifelse(Sex == \"Males\", Pop*(-1), Pop)) |>\n  group_by(PA, AG, Sex) |> \n  summarise(sum_pop = sum(Pop)) |> \n  ungroup()\n\n#sgpop_max_min creates summary parameters for max, min, and sum by grouping them on PA and Sex. AG is not included since we want to find total population across age group\nsgpop_max_min <- sgpop_group |> \n  group_by(PA, Sex) |> \n  summarise(max_pop = max(abs(sum_pop)),\n            min_pop = min(abs(sum_pop))) |> \n  ungroup()\n\n#sgpop_sum sums up the total population by planning area. This will be used to create proportion population per planning area\nsgpop_sum <- sgpop_group |> \n  group_by (PA) |> \n  summarise(sum_pop_pa = sum(abs(sum_pop))) |> \n  ungroup()\n\n#sgpop_total groups total population by AG and Sex to create base data for total Singapore population (across different PA)\nsgpop_total <- sgpop |>\n  mutate(AG = gsub('_to_',' - ', AG),\n         AG = gsub('_and_over', '+', AG),\n         Pop = ifelse(Sex == \"Males\", Pop*(-1), Pop)) |>\n  group_by(AG, Sex) |> \n  summarise(sum_pop_total = sum(Pop)) |> \n  ungroup()\n\n#sgpop_total_summ sums total Singapore population. This will be used to create Singapore proportion population for reference\nsgpop_total_summ <- sgpop_total |> \n  group_by (Sex) |> \n  summarise(sum_pop_total_ag = sum(sum_pop_total)) |> \n  mutate(sum_pop_total_sg = sum(abs(sum_pop_total_ag))) |> \n  ungroup()\n\n#joining multiple tibbles to create final sgpop_clean\nsgpop_draft1 = sgpop_group |> \n  left_join(sgpop_max_min, by = c('PA'='PA', 'Sex' = 'Sex')) \nsgpop_draft2 = sgpop_draft1 |> \n  left_join(sgpop_sum, by = c('PA' = 'PA'))\nsgpop_draft3 = sgpop_draft2 |> \n  left_join(sgpop_total, by = c('AG' = 'AG', 'Sex' = 'Sex'))\nsgpop_clean = sgpop_draft3 |> \n  left_join(sgpop_total_summ, by = 'Sex')\n\n\n\n\nFinal touch-up of the data sgpop_clean\n\nDerive new variables to calculate proportion of population for the second plot. There are two proportions:\n\nprop_pop which calculates proportion of population by age and sex in a given planning area\nprop_pop_total which calculates proportion of population by age and sex for the entire Singapore. This is required to create the reference chart\n\nDerive signal variable from min_pop and max_pop to help to position data labels in min/max values on the respective Males and Females charts. case_when is used to assign the values of -1, 1, 0 for max/min Males, max/min Females, and others respectively.\nVariable Sex and AG needs to be ordered to ensure that it appears as intended when plotting. As such forcats::fct_relevel() is used to order them manually.\n\n\n\nShow the code\n#adding new variables:\n#signal is used to display labels for min and max values in population pyramid\n#prop_pop is proportion population per planning area\n#prop_pop_total is proportion population of Singapore\nsgpop_clean <- sgpop_clean |> \n  mutate(signal = case_when((min_pop == abs(sum_pop) | max_pop == abs(sum_pop)) &\n                              Sex == \"Males\" ~ -1,\n                            (min_pop == abs(sum_pop) | max_pop == abs(sum_pop)) &\n                              Sex == \"Females\" ~ 1,\n                            TRUE~0),\n         prop_pop = round(sum_pop/sum_pop_pa*100, 1),\n         prop_pop_total = abs(round(sum_pop_total/sum_pop_total_sg*100, 1))\n         )\n\n#Order factors\nsgpop_clean$Sex <- fct_relevel(sgpop_clean$Sex, \"Males\")\nsgpop_clean$AG  <- fct_relevel(sgpop_clean$AG, \"0 - 4\", \"5 - 9\")\n\n\n\n\n\n\n\n\n3.3 Creating functions to plot the charts\nFunctions are used to plot the charts to give flexibility to user(s) to input their selected 9 planning areas, ordered by their preference. In this case, however, we will use the original 9 planning areas in the original design.\n\nThe multiple layers of the visualization function\n\nVariable PA needs to be ordered to ensure that it appears as intended when plotting the trellis chart. As such forcats::fct_reorder() is used to order them by population size (sum_pop_pa).\nggplot2::geom_col() to plot the pyramids. This is used instead of ggplot2::geom_bar() as we are plotting the values in the data instead of frequency of occurrence.\nAdding labels on min and max values is achieved using ggplot2::geom_text(). The variable signal is used here to determine whether the labels appear or not. The signal is multiplied by certain value to give certain distance from the end of the bar.\nOnly for second plot, ggplot2::geom_step() is used to create the dashed reference line representing Singapore overall population proportion (%).\nCustomise legend and color using ggplot2::scale_fill_manual().\nCustomise x-axis (population) scales using ggplot2::scale_y_continuous(). Note that we are not using ggplot2::scale_x_continuous() as we used ggplot2::coord_flip() before. Reason for this is because ggplot2::geom_step() is unable to plot categorical variables in y-axis.\nTo customise the title, subtitle, and caption, ggplot2::labs() is used.\nTrellis plot is created using ggplot2::facet_wrap(). Note that we are not using ggplot2::facet_grid() as we are creating the facets using one variable - PA.\nLabels for “Total Population” for each planning area is created using ggplot2::geom_label() to add nice border around the text.\ncowplot::theme_cowplot() is used to create more clean and professional look. Other theme adjustments utilise ggplot2::theme().\n\n\n\nCreating the two functions\n\nFunction plot_PA_pop is created to plot age-sex pyramids based on absolute population. This takes argument of vector of strings of the planning areas.\n\n\n\nShow the code\n#Setting the axis range and limits\npop_range_breaks = seq(-15000,15000,7500)   \npop_range_limits = c(-16000, 16000)                   \n\n#Create function to plot based on absolute population\nplot_PA_pop <- function(planning_area) {\n  sgpop_clean$PA  <- fct_reorder(sgpop_clean$PA, sgpop_clean$sum_pop_pa)\n  ggplot(data = sgpop_clean |> \n           filter(PA %in% planning_area)) +\n    \n    #creating bar charts\n    geom_col(aes(x = AG,\n                 y = sum_pop, \n                 fill = Sex)) +\n    \n    #adding labels on min and max values\n    geom_text(\n      data = sgpop_clean |> filter(PA %in% planning_area & signal != 0),\n      aes(x = AG,\n          y = sum_pop+signal*2500,\n          label = comma(abs(sum_pop))\n          )) +\n    \n    coord_flip() +\n    \n    #adding legends and customize colors\n    scale_fill_manual(values = c(\"steelblue\", \"#f6546a\"),\n                      labels = c(\"Male\", \"Female\"),\n                      name = NULL) +\n    \n    #scale axis\n    scale_y_continuous(\"Population\",\n                       limits = pop_range_limits,\n                       breaks = pop_range_breaks,\n                       labels = function(x){paste0(abs(x/1000),'K')}) +\n    \n    #adding title, subtitle, and caption\n    labs(title = \"Population sizes and patterns can differ drastically across Singapore planning areas\",\n         subtitle = paste0(\"Singapore age-sex pyramids (absolute population) by Planning Area, June 2022\\nTotal Singapore Residents Population : \",comma(sgpop_clean$sum_pop_total_sg)),\n         caption = \"Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022 from Department of Statistics, Singapore\") +\n    \n    #create trellis plot and PA population label\n    facet_wrap(~PA) +\n    geom_label(\n      x = 18,\n      y = 9000,\n      aes(label = paste(\"Total Pop\", comma(sum_pop_pa), sep = \"\\n\")),\n      hjust = \"left\") +\n    \n    #setting theme and aesthetics\n    cowplot::theme_cowplot() +\n    theme(axis.title.x = element_text(vjust = 0.5),\n          axis.title.y = element_blank(),\n          axis.ticks.y = element_blank(),\n          panel.grid.major.x = element_line(color = \"grey90\", linetype = \"solid\"),\n          panel.grid.major.y = element_line(color = \"grey90\", linetype = \"solid\"),\n          legend.position = 'top',\n          legend.justification = 'center',\n          panel.border = element_rect(color = \"grey60\", linetype = \"solid\", linewidth = 0.5),\n          panel.spacing.x = unit(0,\"line\"),\n          panel.spacing.y = unit(0,\"line\"))\n}\n\n\n\nFunction is created to plot age-sex pyramids based on population proportion (%). This also takes argument of vector of strings of the planning areas. However this chart also shows the reference chart based on Singapore overall population proportion %. There are two versions of the reference charts created:\n\n\n\nRepresenting Singapore population proportion % with reference-step line (plot_PA_prop)\n\n\n\nShow the code\n#Setting the axis range and limits\npop_range_breaks_prop = seq(-8,8,4)                     \npop_range_limits_prop = c(-9, 9)   \n\n#Create function to plot based on population proportion \nplot_PA_prop <- function(planning_area) {\n  sgpop_clean$PA  <- fct_reorder(sgpop_clean$PA, sgpop_clean$sum_pop_pa)\n  ggplot(data = sgpop_clean |> filter(PA %in% planning_area),\n         aes(group = 1)) +\n    \n    #creating bar charts\n    geom_col(aes(x = AG,\n                 y = prop_pop, \n                 fill = Sex)) +\n    \n    #adding labels on min and max values\n    geom_text(\n      data = sgpop_clean |> filter(PA %in% planning_area & signal != 0),\n      aes(x = AG,\n          y = prop_pop+signal*1.5,\n          label = paste0(abs(prop_pop),'%')\n          )) +\n    \n    #adding reference step chart\n    geom_step(data = sgpop_clean |> filter(PA %in% planning_area & Sex == \"Males\"),\n      aes(x = AG,\n          y = -prop_pop_total),\n      linetype = \"dashed\",\n      linewidth = 0.6,\n      color =\"black\") +\n    geom_step(data = sgpop_clean |> filter(PA %in% planning_area & Sex == \"Females\"),\n      aes(x = AG,\n          y = prop_pop_total),\n      linetype = \"dashed\",\n      linewidth = 0.6,\n      color =\"black\") +\n    \n    coord_flip() +\n    \n    #adding legends and customize colors\n    scale_fill_manual(values = c(\"steelblue\", \"#f6546a\"),\n                      labels = c(\"Male%\", \"Female%\"),\n                      name = NULL) +\n    \n    #scale axis\n    scale_y_continuous(\"Population Proportion\",\n                       limits = pop_range_limits_prop,\n                       breaks = pop_range_breaks_prop,\n                       labels = function(x){paste0(abs(x),'%')}) +\n    \n    #adding title, subtitle, and caption\n    labs(title = \"Different demographic patterns are revealed when population proportion (%) is used in the pyramid\",\n         subtitle = paste0(\"Singapore age-sex pyramids (proportion population) by Planning Area, June 2022\\nTotal Singapore Residents Population : \",comma(sgpop_clean$sum_pop_total_sg),\"\\nReference step chart (dashed line) represents Singapore overall population proportion (%)\"),\n         caption = \"Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022 from Department of Statistics, Singapore\") +\n    \n    #create trellis plot and PA population label\n    facet_wrap(~PA) +\n    geom_label(\n      x = 18,\n      y = 5,\n      aes(label = paste(\"Total Pop\", comma(sum_pop_pa), sep = \"\\n\")),\n      hjust = \"left\") +\n        \n    #setting theme and aesthetics\n    cowplot::theme_cowplot() +\n    theme(axis.title.x = element_text(vjust = 0.5),\n          axis.title.y = element_blank(),\n          axis.ticks.y = element_blank(),\n          panel.grid.major.x = element_line(color = \"grey90\", linetype = \"solid\"),\n          panel.grid.major.y = element_line(color = \"grey90\", linetype = \"solid\"),\n          legend.position = 'top',\n          legend.justification = 'center',\n          panel.border = element_rect(color = \"grey60\", linetype = \"solid\", linewidth = 0.5),\n          panel.spacing.x = unit(0,\"line\"),\n          panel.spacing.y = unit(0,\"line\")) \n}\n\n\n\nRepresenting Singapore population proportion % with reference bar chart (plot_PA_prop_bar)\n\n\n\nShow the code\n#Setting the axis range and limits\npop_range_breaks_prop = seq(-8,8,4)                     \npop_range_limits_prop = c(-9, 9)\n\n#Create function to plot based on population proportion \nplot_PA_prop_bar <- function(planning_area) {\n  sgpop_clean$PA  <- fct_reorder(sgpop_clean$PA, sgpop_clean$sum_pop_pa)\n  ggplot(data = sgpop_clean |> filter(PA %in% planning_area),\n         aes(group = 1)) +\n    \n    #creating bar charts\n    geom_col(aes(x = AG,\n                 y = prop_pop, \n                 fill = Sex)) +\n    \n    #adding labels on min and max values\n    geom_text(\n      data = sgpop_clean |> filter(PA %in% planning_area & signal != 0),\n      aes(x = AG,\n          y = prop_pop+signal*1.5,\n          label = paste0(abs(prop_pop),'%')\n          )) +\n    \n    #adding reference bar chart\n    geom_col(data = sgpop_clean |> filter(PA %in% planning_area & Sex == \"Males\"),\n      aes(x = AG,\n          y = -prop_pop_total,\n          fill =\"singpop\"),\n      alpha = 0.6) +\n    geom_col(data = sgpop_clean |> filter(PA %in% planning_area & Sex == \"Females\"),\n      aes(x = AG,\n          y = prop_pop_total,\n          fill =\"singpop\"),\n      alpha = 0.6) +\n    \n    coord_flip() +\n    \n    #adding legends and customize colors\n    scale_fill_manual(values = c(\"Males\" = \"steelblue\", \"Females\" = \"#f6546a\", \"singpop\" = \"grey60\"),\n                      breaks = c(\"Males\", \"Females\", \"singpop\"),\n                      labels = c(\"Males\" = \"Male%\", \"Females\" = \"Female%\", \"singpop\" = \"Singapore Population%\"),\n                      name = NULL) +\n    \n    #scale axis\n    scale_y_continuous(\"Population Proportion\",\n                       limits = pop_range_limits_prop,\n                       breaks = pop_range_breaks_prop,\n                       labels = function(x){paste0(abs(x),'%')}) +\n    \n    #adding title, subtitle, and caption\n    labs(title = \"Different demographic patterns are revealed when population proportion (%) is used in the pyramid\",\n         subtitle = paste0(\"Singapore age-sex pyramids (proportion population) by Planning Area, June 2022\\nTotal Singapore Residents Population : \",comma(sgpop_clean$sum_pop_total_sg),\"\\nReference bar chart (transparent grey) represents Singapore overall population proportion (%)\"),\n         caption = \"Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022 from Department of Statistics, Singapore\") +\n    \n    #create trellis plot and PA population label\n    facet_wrap(~PA) +\n    geom_label(\n      x = 18,\n      y = 5,\n      aes(label = paste(\"Total Pop\", comma(sum_pop_pa), sep = \"\\n\")),\n      hjust = \"left\") +\n        \n    #setting theme and aesthetics\n    cowplot::theme_cowplot() +\n    theme(axis.title.x = element_text(vjust = 0.5),\n          axis.title.y = element_blank(),\n          axis.ticks.y = element_blank(),\n          panel.grid.major.x = element_line(color = \"grey90\", linetype = \"solid\"),\n          panel.grid.major.y = element_line(color = \"grey90\", linetype = \"solid\"),\n          legend.position = 'top',\n          legend.justification = 'center',\n          panel.border = element_rect(color = \"grey60\", linetype = \"solid\", linewidth = 0.5),\n          panel.spacing.x = unit(0,\"line\"),\n          panel.spacing.y = unit(0,\"line\")) \n}\n\n\n\n\n\n\n\n\n3.4 Plotting the makeover charts\nAs mentioned above, the first plot contrasts different population sizes and patterns across Singapore planning areas. As such absolute age-sex pyramids are plotted in 3x3 trellis chart. The reason for choosing 3x3 is to fit the display in one screen webpage (using quarto). Having 9x1 or 1x9 will either require audience to scroll or squeeze the pyramids too closely together.\n\n\nShow the code\n#Calling the function to plot absolute population pyramid by the nine planning areas selected by peer\np1 <- plot_PA_pop(c(\"Changi\", \"Downtown Core\", \"Newton\", \"Bukit Timah\",\"Clementi\", \"Sembawang\", \"Serangoon\", \"Hougang\", \"Tampines\"))\np1\n\n\n\n\n\nThe second plot presents an alternative angle to the same planning areas, highlighting the population patterns better without being influenced by the population size. Reference chart based on Singapore overall population proportion % is added to allow audience to see how different planning areas population patterns differ from national proportion. Note that the reference chart is only possible to be added in the second plot as putting this in first plot will overshadow individual planning area pyramids. This is due to sheer size of Singapore population relative to each planning area. The two versions of the second plot is presented below.\n\nRepresenting Singapore population proportion % with reference-step line\n\n\n\nShow the code\n#Calling the function to plot proportion population pyramid by the nine planning areas selected by peer\np2a <- plot_PA_prop(c(\"Changi\", \"Downtown Core\", \"Newton\", \"Bukit Timah\",\"Clementi\", \"Sembawang\", \"Serangoon\", \"Hougang\", \"Tampines\"))\np2a\n\n\n\n\n\n\nRepresenting Singapore population proportion % with reference bar chart\n\n\n\nShow the code\n#Calling the function to plot proportion population pyramid by the nine planning areas selected by peer\np2b <- plot_PA_prop_bar(c(\"Changi\", \"Downtown Core\", \"Newton\", \"Bukit Timah\",\"Clementi\", \"Sembawang\", \"Serangoon\", \"Hougang\", \"Tampines\"))\np2b\n\n\n\n\n\nNote that it is quite difficult to see the reference bar chart, especially for certain planning areas like Clementi or Hougang, in which there is large overlap with overall Singapore Population pyramid. As such it might make sense to use the step chart instead as the final visualization.\n\nFinal Visualization\nThe final visualization is created using patchwork to stitch the two plots together. This will put the two trellis charts side-by-side, showcasing the different angles brought about by the two plots.\n\n\n\n\n\n\n\n\nShow the code\n#Calling the function to plot proportion population pyramid by the nine planning areas selected by peer\nfinal_plot <- p1 + p2a\nfinal_plot + plot_annotation(\n  title = 'Population sizes differ drastically across Singapore planning areas, however its pattern differences are further revealed with proportion pyramid (%)',\n  subtitle = paste0(\"Singapore age-sex pyramids by Planning Area, June 2022\\nTotal Singapore Residents Population : \",comma(sgpop_clean$sum_pop_total_sg),\"\\nReference step chart (dashed line) represents Singapore overall population proportion (%)\"),\n  caption = \"Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022 from Department of Statistics, Singapore\",\n  theme = theme(plot.title = element_text(face = \"bold\", size = 24),\n                plot.subtitle = element_text(size = 18))\n)\n\n\n\n\n\n\n\nClarity Improvements\n\nConsistent scale of x-axis allows fair comparisons of population size and patterns across different planning areas. This is especially important since the population sizes for different planning areas differ greatly.\nAs ggplot2 plots a static chart, having grid lines are important for audience for referencing. In this case, both y and x-axis grid lines are kept to ease readability, allowing audience to refer even the furthest pyramid from the axis (top right pyramid).\nLegend is provided and the “Male” bar chart is put to the left, allowing faster recognition.\nThe title describes the context of the visualization, which is to contrast population sizes and patterns across different planning areas. Subtitle also provides factual clarity of the plots with total population displayed as reference.\nBy adjusting the plot height, the solutions presented still keep the original resolution (5-year), without audience having to scroll down on each individual facet. This eases comparison among all pyramids in one view.\nOnly data labels for min and max population across age groups for each planning areas are provided. This gives reference for audience without overwhelming them with too much text labels.\nAnnotations on each facets highlighting the total population for different planning areas gives an anchor point for audience, further spotlighting the context (different population sizes) of visualization.\nReference chart of second plot adds another dimension of comparison for audience.\nThe planning area is ordered by population sizes, allowing audience to contrast the pyramid sizes per row (for the first plot)\nCaption is provided to present the source of data.\n\n\n\nAesthetics Improvements\n\nSoft solid grid lines are not distracting.\nReference chart is in step chart to mimic the shape of population pyramids. It is also dashed to better distinguish from the grid lines. As discussed above, this offers better overall visualization than the transparent bar charts.\nTick-marks for y-axis (age group) are removed as they are superfluous for categorical variables.\nThe y-axis label “Age Group” is removed as the subtitle already describes it as age-sex pyramids."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#learning-points",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#learning-points",
    "title": "Take-home Exercise 2",
    "section": "4. Learning Points",
    "text": "4. Learning Points\nThis exercise resembles the first assignment closely, using the same data to visualize the trellis chart of age-sex pyramids. However it requires the students to use ggplot2, its extensions, and tidyverse packages instead of Tableau. It also adds another dimension of critique and makeover of peer works which helps to embed best practices in data visualization. The key takeaways are:\n\nIt is important to start by questioning the purpose and intent of the visualization. By understanding this, one can start experimenting and designing the apt visualization from different dimensions. One example would be the second plot produced in this exercise, looking at the age-sex pyramid from the population proportion (%) rather than absolute values.\nThere is no best visualization as there might be some trade-offs between clarity and aesthetics. Adding horizontal (y-axis) grid lines in this chart presented me with a dilemma as it reduces aesthetics (by cluttering the plots), but adds additional clarity, assisting the audience to refer to the age group. This is particularly important for static visualization like this.\nLearning to critique other peer’s works help to identify pain points, to understand best practices, and to awaken new ideas that were not surfaced during Take-home Exercise 1."
  }
]